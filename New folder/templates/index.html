<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Knowledge Graph Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Knowledge Graph Generator</h1>
            <p>Enter text or upload a file to visualize its relationships.</p>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, msg in messages %}
                    <div class="flash {{ category }}">{{ msg }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="card">
            <form method="POST" action="/" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="api_key">Mistral AI API Key (Optional)</label>
                    <input id="api_key" type="text" name="api_key" value="{{ api_key if api_key else '' }}" placeholder="Uses a sample graph if left blank">
                </div>

                <div class="form-group">
                    <label for="text">Text to Analyze</label>
                    <textarea id="text" name="text" placeholder="Paste your text here..." rows="8"></textarea>
                </div>

                <div class="form-group">
                    <label for="file">Or Upload a .txt File</label>
                    <input id="file" name="file" type="file" accept=".txt">
                </div>

                <div class="actions">
                    <button type="submit">Generate Graph</button>
                </div>
            </form>
        </div>

        <footer>
            <p>Built with Flask, D3.js, and Mistral AI.</p>
        </footer>
    </div>
</body>
</html> -->




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Knowledge Graph Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Knowledge Graph Generator</h1>
            <p>Enter text or upload a file to visualize its relationships.</p>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, msg in messages %}
                    <div class="flash {{ category }}">{{ msg }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="card">
            <form method="POST" action="/" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="engine">Extraction Engine</label>
                    <select id="engine" name="engine">
                        <option value="spacy">spaCy (Advanced Local)</option>
                        <option value="basic">Basic NLP (Fast & Simple)</option>
                        <option value="mistral">Mistral AI (Cloud API)</option>
                    </select>
                </div>

                <div class="form-group" id="api_key_group" style="display: none;">
                    <label for="api_key">Mistral AI API Key (Optional)</label>
                    <input id="api_key" type="text" name="api_key" value="{{ api_key if api_key else '' }}" placeholder="Uses a sample graph if left blank">
                </div>

                <div class="form-group">
                    <label for="text">Text to Analyze</label>
                    <textarea id="text" name="text" placeholder="Paste your text here..." rows="8"></textarea>
                </div>

                <div class="form-group">
                    <label for="file">Or Upload a .txt File</label>
                    <input id="file" name="file" type="file" accept=".txt">
                </div>

                <div class="actions">
                    <button type="submit">Generate Graph</button>
                </div>
            </form>
        </div>

        <footer>
            <p>Built with Flask, D3.js, and your choice of NLP.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const engineSelect = document.getElementById('engine');
            const apiKeyGroup = document.getElementById('api_key_group');

            function toggleApiKeyField() {
                apiKeyGroup.style.display = (engineSelect.value === 'mistral') ? 'block' : 'none';
            }
            
            engineSelect.addEventListener('change', toggleApiKeyField);
            toggleApiKeyField(); // Run on page load
        });
    </script>
</body>
</html>